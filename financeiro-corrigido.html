<!DOCTYPE html>
<html lang="pt-BR">
<head>
  
    <!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<!-- Dados centrais MEGAVISION -->
<script src="megavision-data.js"></script>
<!-- CSS do ecossistema (opcional se jÃ¡ tem estilo prÃ³prio) -->
<link rel="stylesheet" href="megavision-style.css" />



    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C&M Financial Pro - GestÃ£o Financeira Inteligente</title>
    <script src="https://cdn.tailwindcss.com"></script>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    html, body {
        margin: 0 !important;
        padding: 0 !important;
        overflow-x: hidden;
    }

    :root {
        /* ğŸ¯ Azul base (foco/clareza) */
        --cm-azul-principal: #2563EB;
        --cm-azul-claro: #E8F0FE;
        --cm-azul-muito-claro: #F4F8FF;
        /* ğŸ”¥ Laranja aÃ§Ã£o */
        --cm-laranja: #FF9944;
        --cm-laranja-escuro: #D97B3A;
        /* ğŸŒ± Verde progresso */
        --cm-verde: #22C55E;
        --cm-verde-claro: #ECFDF5;
        --cm-verde-escuro: #059669;
        /* Bege */
        --cm-bege: #FFF8F0;
        /* ğŸ–¤ Texto */
        --cm-texto-escuro: #1F2933;
    }

    /* Backgrounds principais */
    .bg-cm-laranja { background-color: var(--cm-laranja); }
    .bg-cm-laranja-escuro { background-color: var(--cm-laranja-escuro); }
    .bg-cm-escuro,
    .bg-cm-azul { background-color: var(--cm-azul-principal); }
    .bg-cm-azul-claro { background-color: var(--cm-azul-claro); }
    .bg-cm-azul-muito-claro { background-color: var(--cm-azul-muito-claro); }
    .bg-cm-verde { background-color: var(--cm-verde); }
    .bg-cm-verde-claro { background-color: var(--cm-verde-claro); }
    .bg-cm-verde-escuro { background-color: var(--cm-verde-escuro); }
    .bg-cm-bege { background-color: var(--cm-bege); }

    /* Textos */
    .text-cm-laranja { color: var(--cm-laranja); }
    .text-cm-escuro { color: var(--cm-texto-escuro); }
    .text-cm-azul { color: var(--cm-azul-principal); }
    .text-cm-verde { color: var(--cm-verde); }
    .text-cm-verde-escuro { color: var(--cm-verde-escuro); }

    /* Bordas */
    .border-cm-laranja { border-color: var(--cm-laranja); }
    .border-cm-azul { border-color: var(--cm-azul-principal); }
    .border-cm-verde { border-color: var(--cm-verde); }

    /* Indicadores financeiros */
    .receita { border-left: 5px solid var(--cm-verde); }
    .despesa { border-left: 5px solid #EF4444; }
    .investimento { border-left: 5px solid var(--cm-laranja); }

    /* Modal */
    .modal { 
        display: none; 
        position: fixed; 
        z-index: 50; 
        left: 0; 
        top: 0; 
        width: 100%; 
        height: 100%; 
        background-color: rgba(37, 99, 235, 0.25);
        overflow-y: auto; 
    }
    
    .modal.active { 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        padding: 20px; 
    }
    
    .modal-content { 
        background: linear-gradient(135deg, var(--cm-azul-muito-claro), #FFFFFF);
        border-radius: 16px; 
        max-width: 600px; 
        width: 100%; 
        max-height: 90vh; 
        overflow-y: auto;
        border: 2px solid var(--cm-azul-claro);
        box-shadow: 0 30px 80px rgba(37, 99, 235, 0.25);
        color: var(--cm-texto-escuro);
    }

    /* Inputs */
    .cm-input {
        background: #F4F8FF;
        border: 2px solid #BFDBFE;
        color: #1F2933;
    }
    
    .cm-input:focus {
        outline: none;
        border-color: #2563EB;
        box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    /* FIX: Remove altura mÃ­nima forÃ§ada */
    .min-h-screen {
        min-height: auto !important;
    }

    /* FIX: Container principal sem padding excessivo */
    .max-w-7xl {
        padding-top: 0 !important;
    }

    /* Scroll suave */
    html {
        scroll-behavior: smooth;
    }
</style>

</head>
<body class="bg-gray-50" style="margin:0; padding:0;">

    <div id="app"></div>
    
    <button onclick="app.paginaAtual='dashboard';app.render();" 
        class="fixed bottom-6 right-6 bg-gradient-to-r from-cm-laranja to-cm-laranja-escuro hover:from-cm-verde-escuro hover:to-cm-verde-claro text-white p-4 rounded-full shadow-2xl transform hover:scale-110 transition-all z-50 border-4 border-white">
        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
        </svg>
    </button>

    <div id="modalTransacao" class="modal">
        <div class="modal-content">
            <div class="bg-cm-escuro text-white p-6 rounded-t-xl">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold" id="tituloModalTransacao">Nova TransaÃ§Ã£o</h2>
                    <button onclick="app.fecharModal('modalTransacao')" class="text-white text-3xl">&times;</button>
                </div>
            </div>
            <div class="p-6" id="conteudoModalTransacao"></div>
        </div>
    </div>

    <div id="modalMeta" class="modal">
        <div class="modal-content">
            <div class="bg-cm-escuro text-white p-6 rounded-t-xl">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold">ğŸ¯ Definir Meta Financeira</h2>
                    <button onclick="app.fecharModal('modalMeta')" class="text-white text-3xl">&times;</button>
                </div>
            </div>
            <div class="p-6" id="conteudoModalMeta"></div>
        </div>
    </div>
    
    <script>
const TECNICAS_ALAVANCAGEM={curto_prazo:{titulo:"Alavancagem de Curto Prazo (7-30 dias)",tecnicas:[{nome:"Regra 50/30/20 Turbo",descricao:"50% Essencial | 30% Investimento/DÃ­vidas | 20% Estilo de Vida",acao:"Inverta prioridades: pague dÃ­vidas e invista ANTES de gastar",impacto:"Reduz juros e acelera patrimÃ´nio em 3-6 meses"},{nome:"Efeito Bola de Neve (Snowball)",descricao:"Pague menor dÃ­vida primeiro, depois use esse valor na prÃ³xima",acao:"Liste dÃ­vidas da menor para maior. Ataque a menor com tudo",impacto:"MotivaÃ§Ã£o psicolÃ³gica + libertaÃ§Ã£o progressiva"},{nome:"MÃ©todo Avalanche",descricao:"Pague dÃ­vida com MAIOR juros primeiro",acao:"Calcule juros reais. Elimine cartÃ£o/cheque especial primeiro",impacto:"Economia mÃ¡xima de juros (pode ser 40%+ ao ano)"},{nome:"Renda Extra Direcionada",descricao:"100% da renda extra vai para meta especÃ­fica",acao:"Freela, venda, bico = direto para dÃ­vida ou investimento",impacto:"Acelera metas em 2-3x"},{nome:"Desafio Sem Gastos (No Spend Challenge)",descricao:"7-30 dias sem gastos nÃ£o essenciais",acao:"Congele cartÃµes, use sÃ³ dinheiro, zero delivery/uber",impacto:"Economiza 20-40% da renda facilmente"},{nome:"AutomatizaÃ§Ã£o Financeira",descricao:"Automatize investimento/pagamento no dia do salÃ¡rio",acao:"Configure dÃ©bito automÃ¡tico para poupanÃ§a/investimento",impacto:"Remove tentaÃ§Ã£o, garante disciplina"}]},medio_prazo:{titulo:"Alavancagem de MÃ©dio Prazo (1-6 meses)",tecnicas:[{nome:"Reserva de EmergÃªncia MÃ­nima",descricao:"3-6 meses de despesas essenciais",acao:"Calcule despesas fixas Ã— 3. Meta: acumular em 6 meses",impacto:"SeguranÃ§a para nÃ£o voltar a se endividar"},{nome:"RenegociaÃ§Ã£o Agressiva",descricao:"Negocie TUDO: dÃ­vidas, planos, assinaturas",acao:"Ligue para cada credor. PeÃ§a 50-70% desconto Ã  vista",impacto:"Reduz dÃ­vida total em 30-60%"},{nome:"MÃºltiplas Fontes de Renda",descricao:"2-3 fontes de renda paralelas",acao:"Monetize habilidade: aulas, freela, digital",impacto:"Aumenta renda em 30-100%"}]},regras_ouro:["ğŸ’° Pague a SI MESMO primeiro - separe investimento antes de gastar","ğŸ”¥ Juros compostos trabalham a SEU FAVOR ou CONTRA vocÃª","ğŸ“Š Acompanhe DIARIAMENTE - 5min/dia salva seu futuro","ğŸ¯ Meta sem prazo = sonho. Prazo sem aÃ§Ã£o = ilusÃ£o","âš¡ AÃ§Ã£o imperfeita HOJE > plano perfeito amanhÃ£","ğŸš« DÃ­vida de consumo Ã© VENENO. DÃ­vida de investimento Ã© ALAVANCA","ğŸ’ª Desconforto temporÃ¡rio = liberdade permanente"]};
const CATEGORIAS={receitas:['SalÃ¡rio','Freela','Investimentos','Vendas','BÃ´nus','Outros'],despesas:['Moradia','AlimentaÃ§Ã£o','Transporte','SaÃºde','EducaÃ§Ã£o','Lazer','DÃ­vidas','Outros'],investimentos:['PoupanÃ§a','Tesouro Direto','CDB','AÃ§Ãµes','Fundos','Cripto','Outros']};

class GestaoFinanceira {
    constructor() {
        this.paginaAtual = 'dashboard';
        this.transacoes = [];
        this.metas = [];
        this.orcamento = {essencial: 50, investimento: 30, estilo_vida: 20};
        this.carregarDados();
        this.render();
    }

    abrirModalTransacao(tipo = 'receita') {
        document.getElementById('tituloModalTransacao').textContent = tipo === 'receita' ? 'ğŸ’° Nova Receita' : tipo === 'despesa' ? 'ğŸ’¸ Nova Despesa' : 'ğŸ“ˆ Novo Investimento';
        const categorias = tipo === 'receita' ? CATEGORIAS.receitas : tipo === 'despesa' ? CATEGORIAS.despesas : CATEGORIAS.investimentos;
        document.getElementById('conteudoModalTransacao').innerHTML = `
            <div class="space-y-4">
                <div><label class="block text-sm font-semibold mb-2">ğŸ“ DescriÃ§Ã£o</label><input type="text" id="descTransacao" class="w-full px-4 py-2 rounded-lg cm-input" placeholder="Ex: SalÃ¡rio de fevereiro"></div>
                <div><label class="block text-sm font-semibold mb-2">ğŸ’µ Valor (R$)</label><input type="number" id="valorTransacao" class="w-full px-4 py-2 rounded-lg cm-input" placeholder="0.00" step="0.01"></div>
                <div><label class="block text-sm font-semibold mb-2">ğŸ“ Categoria</label><select id="categoriaTransacao" class="w-full px-4 py-2 rounded-lg cm-input">${categorias.map(c => `<option value="${c}">${c}</option>`).join('')}</select></div>
                <div><label class="block text-sm font-semibold mb-2">ğŸ“… Data</label><input type="date" id="dataTransacao" value="${new Date().toISOString().split('T')[0]}" class="w-full px-4 py-2 rounded-lg cm-input"></div>
                <div><label class="block text-sm font-semibold mb-2">ğŸ” Recorrente?</label><select id="recorrenteTransacao" class="w-full px-4 py-2 rounded-lg cm-input"><option value="false">NÃ£o</option><option value="mensal">Mensal</option><option value="semanal">Semanal</option></select></div>
                <button onclick="app.salvarTransacao('${tipo}')" class="w-full bg-cm-laranja text-white py-3 rounded-lg font-bold text-lg hover:opacity-90">ğŸ’¾ Salvar</button>
            </div>`;
        document.getElementById('modalTransacao').classList.add('active');
    }

    salvarTransacao(tipo) {
        const transacao = {id: Date.now(), tipo, descricao: document.getElementById('descTransacao').value, valor: parseFloat(document.getElementById('valorTransacao').value), categoria: document.getElementById('categoriaTransacao').value, data: document.getElementById('dataTransacao').value, recorrente: document.getElementById('recorrenteTransacao').value, paga: tipo === 'despesa' ? false : true, criado_em: new Date().toISOString()};
        if (!transacao.descricao || !transacao.valor || transacao.valor <= 0) { alert('âŒ Preencha descriÃ§Ã£o e valor vÃ¡lido!'); return; }
        this.transacoes.push(transacao);
        this.salvarDados();
        this.fecharModal('modalTransacao');
        alert('âœ… TransaÃ§Ã£o registrada!');
        this.render();
    }

    marcarComoPaga(id) {
        const transacao = this.transacoes.find(t => t.id === id);
        if (transacao && transacao.tipo === 'despesa') {
            transacao.paga = !transacao.paga;
            transacao.dataPagamento = transacao.paga ? new Date().toISOString() : null;
            this.salvarDados();
            this.render();
        }
    }

    excluirTransacao(id) {
        if (confirm('Excluir esta transaÃ§Ã£o?')) {
            this.transacoes = this.transacoes.filter(t => t.id !== id);
            this.salvarDados();
            this.render();
        }
    }

abrirModalMeta() {
    document.getElementById('conteudoModalMeta').innerHTML = `
        <div class="space-y-4">
            <div><label class="block text-sm font-semibold mb-2">ğŸ¯ Objetivo da Meta</label><input type="text" id="objetivoMeta" class="w-full px-4 py-2 rounded-lg cm-input" placeholder="Ex: Pagar dÃ­vida do cartÃ£o"></div>
            <div><label class="block text-sm font-semibold mb-2">ğŸ’° Valor Total (R$)</label><input type="number" id="valorMeta" class="w-full px-4 py-2 rounded-lg cm-input" placeholder="5000.00" step="0.01"></div>
            <div><label class="block text-sm font-semibold mb-2">ğŸ“… Prazo (dias)</label><select id="prazoMeta" class="w-full px-4 py-2 rounded-lg cm-input"><option value="7">7 dias</option><option value="15">15 dias</option><option value="30" selected>30 dias</option><option value="60">60 dias</option><option value="90">90 dias</option><option value="180">180 dias</option></select></div>
            <div><label class="block text-sm font-semibold mb-2">ğŸ¨ Tipo de Meta</label><select id="tipoMeta" class="w-full px-4 py-2 rounded-lg cm-input"><option value="economizar">ğŸ’° Economizar</option><option value="pagar_divida">ğŸ”¥ Pagar DÃ­vida</option><option value="investir">ğŸ“ˆ Investir</option><option value="renda_extra">ğŸ’¼ Renda Extra</option></select></div>
            <div><label class="block text-sm font-semibold mb-2">ğŸ“ EstratÃ©gia</label><textarea id="estrategiaMeta" class="w-full px-4 py-2 rounded-lg cm-input" rows="3"></textarea></div>
            <button onclick="app.salvarMeta()" class="w-full bg-cm-laranja text-white py-3 rounded-lg font-bold text-lg">ğŸ¯ Criar Meta</button>
        </div>`;
    document.getElementById('modalMeta').classList.add('active');
}

    salvarMeta() {
        const meta = {id: Date.now(), objetivo: document.getElementById('objetivoMeta').value, valorTotal: parseFloat(document.getElementById('valorMeta').value), valorAtual: 0, prazo: parseInt(document.getElementById('prazoMeta').value), tipo: document.getElementById('tipoMeta').value, estrategia: document.getElementById('estrategiaMeta').value, dataInicio: new Date().toISOString(), status: 'ativa'};
        if (!meta.objetivo || !meta.valorTotal || meta.valorTotal <= 0) { alert('âŒ Preencha objetivo e valor vÃ¡lido!'); return; }
        meta.dataFim = new Date(Date.now() + meta.prazo * 24 * 60 * 60 * 1000).toISOString();
        meta.valorDiario = meta.valorTotal / meta.prazo;
        this.metas.push(meta);
        this.salvarDados();
        this.fecharModal('modalMeta');
        alert(`âœ… Meta criada! R$ ${meta.valorDiario.toFixed(2)}/dia`);
        this.render();
    }

    atualizarProgressoMeta(metaId) {
        const valor = parseFloat(prompt('Quanto vocÃª progrediu? (R$)'));
        if (!valor || valor <= 0) return;
        const meta = this.metas.find(m => m.id === metaId);
        if (meta) {
            meta.valorAtual += valor;
            if (meta.valorAtual >= meta.valorTotal) { meta.status = 'concluida'; alert('ğŸ‰ PARABÃ‰NS! Meta concluÃ­da!'); }
            this.salvarDados();
            this.render();
        }
    }

    excluirMeta(id) {
        if (confirm('Excluir esta meta?')) {
            this.metas = this.metas.filter(m => m.id !== id);
            this.salvarDados();
            this.render();
        }
    }

    calcularResumo(periodo = 'mes') {
        const hoje = new Date();
        const filtradas = this.transacoes.filter(t => {
            const dataTransacao = new Date(t.data);
            if (periodo === 'mes') return dataTransacao.getMonth() === hoje.getMonth() && dataTransacao.getFullYear() === hoje.getFullYear();
            if (periodo === 'semana') {
                const diffTime = Math.abs(hoje - dataTransacao);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                return diffDays <= 7;
            }
            return true;
        });
        const receitas = filtradas.filter(t => t.tipo === 'receita').reduce((s, t) => s + t.valor, 0);
        const despesas = filtradas.filter(t => t.tipo === 'despesa' && t.paga).reduce((s, t) => s + t.valor, 0);
        const despesasPendentes = filtradas.filter(t => t.tipo === 'despesa' && !t.paga).reduce((s, t) => s + t.valor, 0);
        const investimentos = filtradas.filter(t => t.tipo === 'investimento').reduce((s, t) => s + t.valor, 0);
        const saldo = receitas - despesas - investimentos;
        const taxaInvestimento = receitas > 0 ? ((investimentos / receitas) * 100).toFixed(1) : 0;
        const taxaGastos = receitas > 0 ? ((despesas / receitas) * 100).toFixed(1) : 0;
        return {receitas, despesas, investimentos, saldo, taxaInvestimento, taxaGastos, total: filtradas.length, despesasPendentes};
    }

    calcularPorCategoria() {
        const porCategoria = {};
        this.transacoes.forEach(t => {
            if (!porCategoria[t.categoria]) porCategoria[t.categoria] = {total: 0, count: 0};
            porCategoria[t.categoria].total += t.valor;
            porCategoria[t.categoria].count++;
        });
        return Object.entries(porCategoria).sort((a, b) => b[1].total - a[1].total).slice(0, 10);
    }

    lancamentoRapido() {
        const desc = document.getElementById('quickDesc').value;
        const valor = parseFloat(document.getElementById('quickValor').value);
        const tipo = document.getElementById('quickTipo').value;
        if (!desc || !valor || valor <= 0) { alert('âŒ Preencha descriÃ§Ã£o e valor!'); return; }
        this.transacoes.push({id: Date.now(), tipo, descricao: desc, valor, categoria: 'Outros', data: new Date().toISOString().split('T')[0], recorrente: 'false', paga: tipo === 'despesa' ? false : true, criado_em: new Date().toISOString()});
        this.salvarDados();
        document.getElementById('quickDesc').value = '';
        document.getElementById('quickValor').value = '';
        alert('âœ… LanÃ§ado!');
        this.render();
    }

    calcularDividasAtrasadas() {
        const hoje = new Date();
        const atrasadas = this.transacoes.filter(t => {
            if (t.tipo !== 'despesa' || t.paga) return false;
            const dataTransacao = new Date(t.data);
            return dataTransacao < hoje;
        });
        const valorTotal = atrasadas.reduce((s, t) => s + t.valor, 0);
        return {quantidade: atrasadas.length, valor: valorTotal};
    }

    calcularDiasRestantes() {
        const hoje = new Date();
        const ultimoDia = new Date(hoje.getFullYear(), hoje.getMonth() + 1, 0);
        return ultimoDia.getDate() - hoje.getDate();
    }

    exportarCSV() {
        let csv = 'Data,Tipo,Categoria,DescriÃ§Ã£o,Valor\n';
        this.transacoes.sort((a, b) => new Date(b.data) - new Date(a.data)).forEach(t => { csv += `${t.data},${t.tipo},${t.categoria},"${t.descricao}",${t.valor}\n`; });
        const blob = new Blob([csv], {type: 'text/csv;charset=utf-8;'});
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = `financas_${new Date().toISOString().split('T')[0]}.csv`;
        link.click();
        alert('âœ… Planilha exportada!');
    }

    exportarJSON() {
        const dados = {transacoes: this.transacoes, metas: this.metas, orcamento: this.orcamento, exportado_em: new Date().toISOString()};
        const blob = new Blob([JSON.stringify(dados, null, 2)], {type: 'application/json'});
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = `backup_financeiro_${new Date().toISOString().split('T')[0]}.json`;
        link.click();
        alert('âœ… Backup exportado!');
    }

    salvarDados() {
        localStorage.setItem('financeiro_transacoes', JSON.stringify(this.transacoes));
        localStorage.setItem('financeiro_metas', JSON.stringify(this.metas));
        localStorage.setItem('financeiro_orcamento', JSON.stringify(this.orcamento));
    }

    carregarDados() {
        const t = localStorage.getItem('financeiro_transacoes');
        if (t) this.transacoes = JSON.parse(t);
        const m = localStorage.getItem('financeiro_metas');
        if (m) this.metas = JSON.parse(m);
        const o = localStorage.getItem('financeiro_orcamento');
        if (o) this.orcamento = JSON.parse(o);
    }

    limparDados() {
        if (confirm('âš ï¸ Apagar TODOS os dados?') && confirm('Tem certeza?')) {
            localStorage.clear();
            this.transacoes = [];
            this.metas = [];
            alert('âœ… Dados limpos!');
            this.render();
        }
    }

    fecharModal(id) {
        document.getElementById(id).classList.remove('active');
    }

    render() {
        const app = document.getElementById('app');
        const pages = {'dashboard': () => this.renderDashboard(), 'transacoes': () => this.renderTransacoes(), 'metas': () => this.renderMetas(), 'alavancagem': () => this.renderAlavancagem(), 'relatorios': () => this.renderRelatorios()};
        app.innerHTML = pages[this.paginaAtual]();
    }

    renderMenu(ativo) {
        const menus = [{id:'dashboard',label:'ğŸ“Š Dashboard'},{id:'transacoes',label:'ğŸ’° TransaÃ§Ãµes'},{id:'metas',label:'ğŸ¯ Metas'},{id:'alavancagem',label:'ğŸš€ Alavancagem'},{id:'relatorios',label:'ğŸ“ˆ RelatÃ³rios'}];
        return `<div class="bg-cm-azul-claro shadow-md border-b-4 border-cm-laranja sticky top-0 z-40"><div class="max-w-7xl mx-auto flex gap-2 px-4 py-3 overflow-x-auto">${menus.map(m => `<button onclick="app.paginaAtual='${m.id}';app.render();" class="px-6 py-3 rounded-lg font-bold whitespace-nowrap text-sm transition-all ${ativo === m.id ? 'bg-gradient-to-r from-cm-laranja to-cm-laranja-escuro text-white shadow-lg scale-105' : 'bg-cm-bege text-cm-verde-escuro hover:bg-cm-laranja hover:text-white'}">${m.label}</button>`).join('')}</div></div>`;
    }

    renderDashboard() {
    const resumo = this.calcularResumo('mes');
    const diasRestantes = this.calcularDiasRestantes();
    const metasAtivas = this.metas.filter(m => m.status === 'ativa');
    
 return `
    <div class="bg-gradient-to-br from-gray-50 to-cm-bege">
            <!-- Header -->
            <div class="bg-gradient-to-r from-cm-verde-escuro to-cm-verde-claro text-white shadow-xl">
                <div class="max-w-7xl mx-auto px-4 py-4">
                    <div class="flex items-center gap-4">
                        <div class="bg-cm-laranja text-cm-verde-escuro font-black text-2xl px-4 py-2 rounded-lg shadow-lg">
                            C&M
                        </div>
                        <div>
                            <h1 class="text-3xl font-bold">ğŸ’¼ Dashboard Financeiro</h1>
                            <p class="text-sm mt-1 opacity-90">Financial Pro - GestÃ£o Inteligente</p>
                        </div>
                    </div>
                </div>
            </div>

            ${this.renderMenu('dashboard')}

          <!-- Main Content -->
<div class="max-w-7xl mx-auto px-4 py-2">
    
    <!-- Card Resumo Compacto -->
    <div class="bg-gradient-to-br from-cm-verde-escuro via-cm-verde-claro to-cm-laranja text-white rounded-xl shadow-lg p-3 mb-3 border-2 border-white">
        <div class="flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="bg-cm-azul-claro text-cm-verde-escuro px-2 py-1 rounded font-black text-sm">C&M</div>
                <div>
                    <h2 class="text-xl font-bold">Fevereiro 2026</h2>
                    <p class="text-xs opacity-90">${diasRestantes} dias restantes</p>
                </div>
            </div>
            <div class="text-right">
                <div class="text-xs opacity-90">Saldo</div>
                <div class="text-2xl font-black">
                    ${resumo.saldo >= 0 ? 'ğŸ’°' : 'âš ï¸'} R$ ${resumo.saldo.toLocaleString('pt-BR', {minimumFractionDigits: 2})}
                </div>
            </div>
        </div>
    </div>

    <!-- Grid 3 Valores Compacto -->
    <div class="grid grid-cols-3 gap-2 mb-3">
        <div class="bg-white rounded-lg p-2 shadow border-l-4 border-green-500">
            <div class="text-xs text-gray-600">ğŸ’° Receitas</div>
            <div class="text-xl font-bold text-green-600">R$ ${resumo.receitas.toLocaleString('pt-BR')}</div>
        </div>
        <div class="bg-white rounded-lg p-2 shadow border-l-4 border-red-500">
            <div class="text-xs text-gray-600">ğŸ’¸ Despesas</div>
            <div class="text-xl font-bold text-red-600">R$ ${resumo.despesas.toLocaleString('pt-BR')}</div>
        </div>
        <div class="bg-white rounded-lg p-2 shadow border-l-4 border-orange-500">
            <div class="text-xs text-gray-600">ğŸ“ˆ Investimentos</div>
            <div class="text-xl font-bold text-orange-600">R$ ${resumo.investimentos.toLocaleString('pt-BR')}</div>
        </div>
    </div>

    <!-- Cards Indicadores -->
    <div class="grid grid-cols-4 gap-2 mb-3">
        <div class="bg-cm-azul-claro rounded-lg shadow p-3 border-l-4 border-cm-laranja">
            <div class="flex items-center justify-between">
                <div>
                    <div class="text-xs text-gray-600 font-semibold">Taxa Investimento</div>
                    <div class="text-2xl font-black text-cm-laranja">${resumo.taxaInvestimento}%</div>
                    <div class="text-xs text-gray-500">Meta: 30%</div>
                </div>
                <div class="text-3xl">ğŸ“Š</div>
            </div>
        </div>

        <div class="bg-cm-azul-claro rounded-lg shadow p-3 border-l-4 border-cm-verde-escuro">
            <div class="flex items-center justify-between">
                <div>
                    <div class="text-xs text-gray-600 font-semibold">TransaÃ§Ãµes</div>
                    <div class="text-2xl font-black text-cm-verde-escuro">${resumo.total}</div>
                    <div class="text-xs text-gray-500">Este mÃªs</div>
                </div>
                <div class="text-3xl">ğŸ’³</div>
            </div>
        </div>

        <div class="bg-cm-azul-claro rounded-lg shadow p-3 border-l-4 border-purple-500">
            <div class="flex items-center justify-between">
                <div>
                    <div class="text-xs text-gray-600 font-semibold">Metas Ativas</div>
                    <div class="text-2xl font-black text-purple-600">${metasAtivas.length}</div>
                    <div class="text-xs text-gray-500">Em progresso</div>
                </div>
                <div class="text-3xl">ğŸ¯</div>
            </div>
        </div>

        <div class="bg-cm-azul-claro rounded-lg shadow p-3 border-l-4 ${this.calcularDividasAtrasadas().quantidade > 0 ? 'border-red-500' : 'border-green-500'}">
            <div class="flex items-center justify-between">
                <div>
                    <div class="text-xs text-gray-600 font-semibold">
                        ${this.calcularDividasAtrasadas().quantidade > 0 ? 'Contas Atrasadas' : 'Contas OK'}
                    </div>
                    <div class="text-2xl font-black ${this.calcularDividasAtrasadas().quantidade > 0 ? 'text-red-600' : 'text-green-600'}">
                        ${this.calcularDividasAtrasadas().quantidade > 0 ? this.calcularDividasAtrasadas().quantidade : 'âœ“'}
                    </div>
                    <div class="text-xs text-gray-500">
                        ${this.calcularDividasAtrasadas().quantidade > 0 ? `R$ ${this.calcularDividasAtrasadas().valor.toLocaleString('pt-BR')}` : 'Tudo certo'}
                    </div>
                </div>
                <div class="text-3xl">${this.calcularDividasAtrasadas().quantidade > 0 ? 'âš ï¸' : 'âœ…'}</div>
            </div>
        </div>
    </div>

    <!-- Alerta Despesas Pendentes -->
    ${resumo.despesasPendentes > 0 ? `
        <div class="bg-red-50 border-l-4 border-red-500 rounded-lg shadow p-3 mb-3">
            <div class="flex items-center gap-3">
                <div class="text-2xl">âš ï¸</div>
                <div class="flex-1">
                    <h3 class="text-sm font-bold text-red-800">Despesas Pendentes</h3>
                    <p class="text-xs text-red-700">
                        <strong>R$ ${resumo.despesasPendentes.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</strong> em contas nÃ£o pagas
                    </p>
                </div>
                <button onclick="app.paginaAtual='transacoes';app.render();" 
                    class="bg-red-500 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-red-600">
                    Ver Contas
                </button>
            </div>
        </div>
    ` : ''}

    <!-- BotÃµes de AÃ§Ã£o -->
    <div class="grid grid-cols-3 gap-2 mb-3">
        <button onclick="app.abrirModalTransacao('receita')" 
            class="bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white p-4 rounded-xl font-bold text-lg shadow-lg transform hover:scale-105 transition">
            <div class="text-4xl mb-2">ğŸ’°</div>
            <div>Nova Receita</div>
        </button>
        
        <button onclick="app.abrirModalTransacao('despesa')" 
            class="bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white p-4 rounded-xl font-bold text-lg shadow-lg transform hover:scale-105 transition">
            <div class="text-4xl mb-2">ğŸ’¸</div>
            <div>Nova Despesa</div>
        </button>
        
        <button onclick="app.abrirModalTransacao('investimento')" 
            class="bg-gradient-to-br from-cm-laranja to-cm-laranja-escuro hover:from-cm-laranja-escuro hover:to-cm-verde-escuro text-white p-4 rounded-xl font-bold text-lg shadow-lg transform hover:scale-105 transition">
            <div class="text-4xl mb-2">ğŸ“ˆ</div>
            <div>Investimento</div>
        </button>
    </div>

    <!-- LanÃ§amento RÃ¡pido -->
    <div class="bg-gradient-to-r from-cm-bege to-white rounded-xl shadow-lg p-3 border-2 border-cm-laranja">
        <div class="flex items-center gap-2 mb-3">
            <div class="bg-cm-laranja text-white p-2 rounded-lg">
                <span class="text-xl">âš¡</span>
            </div>
            <h3 class="text-lg font-black text-cm-verde-escuro">LanÃ§amento RÃ¡pido</h3>
        </div>
        
        <div class="grid grid-cols-4 gap-2">
            <input type="text" id="quickDesc" placeholder="DescriÃ§Ã£o" 
                class="px-3 py-2 border-2 border-cm-laranja rounded-lg text-sm font-semibold">
            
            <input type="number" id="quickValor" placeholder="R$ 0,00" step="0.01" 
                class="px-3 py-2 border-2 border-cm-laranja rounded-lg text-sm font-semibold">
            
            <select id="quickTipo" class="px-3 py-2 border-2 border-cm-laranja rounded-lg text-sm font-semibold">
                <option value="despesa">ğŸ’¸ Despesa</option>
                <option value="receita">ğŸ’° Receita</option>
                <option value="investimento">ğŸ“ˆ Investimento</option>
            </select>
            
            <button onclick="app.lancamentoRapido()" 
                class="bg-gradient-to-r from-cm-laranja to-cm-laranja-escuro hover:from-cm-verde-escuro hover:to-cm-verde-claro text-white py-2 rounded-lg font-black text-sm">
                âš¡ LANÃ‡AR
            </button>
        </div>
    </div>

</div>
        </div>
    `;
}
    renderTransacoes() {
        const ultimas = [...this.transacoes].sort((a, b) => new Date(b.data) - new Date(a.data)).slice(0, 50);
        return `<div class="min-h-screen bg-gradient-to-br from-gray-50 to-cm-bege">
            <div class="bg-gradient-to-r from-cm-verde-escuro to-cm-verde-claro text-white shadow-xl">
                <div class="max-w-7xl mx-auto px-4 py-6"><div class="flex items-center gap-4"><div class="bg-cm-laranja text-cm-verde-escuro font-black text-2xl px-4 py-2 rounded-lg shadow-lg">C&M</div><div><h1 class="text-3xl font-bold">ğŸ’° Gerenciar TransaÃ§Ãµes</h1><p class="text-sm mt-1 opacity-90">Financial Pro</p></div></div></div>
            </div>
            ${this.renderMenu('transacoes')}
            <div class="max-w-7xl mx-auto px-4 py-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-black text-cm-verde-escuro">HistÃ³rico (${this.transacoes.length})</h2>
                    <div class="flex gap-3">
                        <button onclick="app.abrirModalTransacao('receita')" class="bg-green-500 text-white px-4 py-2 rounded-lg font-bold">â• Receita</button>
                        <button onclick="app.abrirModalTransacao('despesa')" class="bg-red-500 text-white px-4 py-2 rounded-lg font-bold">â• Despesa</button>
                        <button onclick="app.abrirModalTransacao('investimento')" class="bg-cm-laranja text-white px-4 py-2 rounded-lg font-bold">â• Investimento</button>
                    </div>
                </div>
                ${ultimas.length === 0 ? '<div class="bg-yellow-50 border-l-4 border-yellow-400 p-6 rounded-lg"><h3 class="text-lg font-bold text-yellow-800 mb-2">ğŸ“ Comece Agora!</h3><p>Registre sua primeira transaÃ§Ã£o.</p></div>' : `
                    <div class="bg-cm-azul-claro rounded-2xl shadow-xl overflow-hidden border-t-4 border-cm-laranja">
                        <table class="w-full">
                            <thead class="bg-gradient-to-r from-cm-verde-escuro to-cm-verde-claro text-white">
                                <tr><th class="px-6 py-4 text-left font-bold">Data</th><th class="px-6 py-4 text-left font-bold">DescriÃ§Ã£o</th><th class="px-6 py-4 text-left font-bold">Categoria</th><th class="px-6 py-4 text-right font-bold">Valor</th><th class="px-6 py-4 text-center font-bold">AÃ§Ãµes</th></tr>
                            </thead>
                            <tbody class="divide-y">
                                ${ultimas.map(t => {
                                    const corValor = t.tipo === 'receita' ? 'text-green-600' : 'text-red-600';
                                    const sinal = t.tipo === 'receita' ? '+' : '-';
                                    return `<tr class="hover:bg-cm-bege ${t.tipo}">
                                        <td class="px-6 py-4 text-sm">${new Date(t.data).toLocaleDateString('pt-BR')}</td>
                                        <td class="px-6 py-4"><div class="font-bold">${t.descricao}</div>${t.recorrente !== 'false' ? `<div class="text-xs text-gray-500">ğŸ” ${t.recorrente}</div>` : ''}</td>
                                        <td class="px-6 py-4"><span class="bg-cm-bege border border-cm-laranja px-3 py-1 rounded-full text-xs font-bold">${t.categoria}</span></td>
                                        <td class="px-6 py-4 text-right"><span class="font-black ${corValor}">${sinal} R$ ${t.valor.toLocaleString('pt-BR')}</span></td>
                                        <td class="px-6 py-4 text-center">
                                            ${t.tipo === 'despesa' ? `<input type="checkbox" ${t.paga ? 'checked' : ''} onclick="app.marcarComoPaga(${t.id})" class="w-5 h-5 cursor-pointer mr-3">` : ''}
                                            <button onclick="app.excluirTransacao(${t.id})" class="text-red-500 hover:text-red-700 font-bold">ğŸ—‘ï¸</button>
                                        </td>
                                    </tr>`;
                                }).join('')}
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-6 flex gap-4">
                        <button onclick="app.exportarCSV()" class="bg-green-500 text-white px-6 py-3 rounded-lg font-bold">ğŸ“¥ Exportar CSV</button>
                        <button onclick="app.exportarJSON()" class="bg-cm-laranja text-white px-6 py-3 rounded-lg font-bold">ğŸ’¾ Backup JSON</button>
                    </div>
                `}
            </div>
        </div>`;
    }

    renderMetas() {
        const ativas = this.metas.filter(m => m.status === 'ativa');
        const concluidas = this.metas.filter(m => m.status === 'concluida');
        return `<div class="min-h-screen bg-gradient-to-br from-gray-50 to-cm-bege">
            <div class="bg-gradient-to-r from-cm-verde-escuro to-cm-verde-claro text-white shadow-xl">
                <div class="max-w-7xl mx-auto px-4 py-6"><div class="flex items-center gap-4"><div class="bg-cm-laranja text-cm-verde-escuro font-black text-2xl px-4 py-2 rounded-lg shadow-lg">C&M</div><div><h1 class="text-3xl font-bold">ğŸ¯ Metas Financeiras</h1><p class="text-sm mt-1 opacity-90">Financial Pro</p></div></div></div>
            </div>
            ${this.renderMenu('metas')}
            <div class="max-w-7xl mx-auto px-4 py-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-black text-cm-verde-escuro">Suas Metas</h2>
                    <button onclick="abrirModalMeta()" class="bg-gradient-to-r from-cm-laranja to-cm-laranja-escuro text-white px-6 py-3 rounded-lg font-black">â• Nova Meta</button>
                </div>
                ${ativas.length > 0 ? `<div class="mb-8"><h3 class="text-xl font-bold text-cm-laranja mb-4">ğŸ”¥ Em Progresso</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-6">${ativas.map(meta => {
                    const progresso = (meta.valorAtual / meta.valorTotal * 100).toFixed(1);
                    const diasPassados = Math.floor((new Date() - new Date(meta.dataInicio)) / (1000 * 60 * 60 * 24));
                    const diasRestantes = meta.prazo - diasPassados;
                    return `<div class="bg-cm-azul-clarorounded-2xl shadow-xl p-6 border-t-4 border-cm-laranja">
                        <div class="flex justify-between mb-4"><div><h4 class="text-xl font-black text-cm-verde-escuro">${meta.objetivo}</h4></div><button onclick="app.excluirMeta(${meta.id})" class="text-red-500">ğŸ—‘ï¸</button></div>
                        <div class="mb-4"><div class="flex justify-between text-sm mb-2"><span>R$ ${meta.valorAtual.toLocaleString('pt-BR')} / R$ ${meta.valorTotal.toLocaleString('pt-BR')}</span><span class="font-bold">${progresso}%</span></div><div class="w-full bg-gray-200 rounded-full h-6"><div class="bg-gradient-to-r from-cm-laranja to-cm-verde-escuro h-6 rounded-full" style="width: ${Math.min(progresso, 100)}%"></div></div></div>
                        <div class="grid grid-cols-2 gap-4 mb-4"><div class="bg-cm-bege rounded-lg p-3 text-center border-2 border-cm-laranja"><div class="text-3xl font-black text-cm-laranja">${diasRestantes}</div><div class="text-xs">dias restantes</div></div><div class="bg-cm-bege rounded-lg p-3 text-center border-2 border-cm-laranja"><div class="text-2xl font-black text-cm-laranja">R$ ${meta.valorDiario.toFixed(2)}</div><div class="text-xs">por dia</div></div></div>
                        <button onclick="app.atualizarProgressoMeta(${meta.id})" class="w-full bg-green-500 text-white py-3 rounded-lg font-black">â• Atualizar</button>
                    </div>`;
                }).join('')}</div></div>` : ''}
                ${concluidas.length > 0 ? `<div><h3 class="text-xl font-bold text-green-600 mb-4">âœ… ConcluÃ­das</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-4">${concluidas.map(meta => `<div class="bg-green-50 border-2 border-green-500 rounded-lg p-4"><h4 class="font-bold text-green-800">${meta.objetivo}</h4><p class="text-sm text-green-600 mt-2">R$ ${meta.valorTotal.toLocaleString('pt-BR')}</p></div>`).join('')}</div></div>` : ''}
                ${ativas.length === 0 && concluidas.length === 0 ? '<div class="bg-yellow-50 border-l-4 border-yellow-400 p-8 rounded-lg"><h3 class="text-xl font-bold text-yellow-800 mb-2">ğŸ¯ Crie sua Primeira Meta!</h3><button onclick="abrirModalMeta()" class="bg-cm-laranja text-white px-6 py-3 rounded-lg font-bold mt-4">â• Criar Meta</button></div>' : ''}
            </div>
        </div>`;
    }

    renderAlavancagem() {
        return `<div class="min-h-screen bg-gradient-to-br from-gray-50 to-cm-bege">
            <div class="bg-gradient-to-r from-cm-verde-escuro to-cm-verde-claro text-white shadow-xl">
                <div class="max-w-7xl mx-auto px-4 py-6"><div class="flex items-center gap-4"><div class="bg-cm-laranja text-cm-verde-escuro font-black text-2xl px-4 py-2 rounded-lg shadow-lg">C&M</div><div><h1 class="text-3xl font-bold">ğŸš€ TÃ©cnicas de Alavancagem</h1><p class="text-sm mt-1 opacity-90">EstratÃ©gias Comprovadas</p></div></div></div>
            </div>
            ${this.renderMenu('alavancagem')}
            <div class="max-w-7xl mx-auto px-4 py-8">
                <div class="bg-gradient-to-r from-yellow-400 via-cm-laranja to-cm-laranja-escuro text-white rounded-2xl shadow-2xl p-8 mb-8 border-4 border-white">
                    <h2 class="text-3xl font-black mb-6">âš¡ 7 Regras de Ouro</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">${TECNICAS_ALAVANCAGEM.regras_ouro.map(regra => `<div class="bg-cm-azul-claro bg-opacity-20 rounded-xl p-5"><p class="font-bold text-lg">${regra}</p></div>`).join('')}</div>
                </div>
                <div class="bg-cm-azul-claro rounded-2xl shadow-xl p-8 mb-8 border-t-4 border-cm-laranja">
                    <h2 class="text-3xl font-black text-cm-verde-escuro mb-6">${TECNICAS_ALAVANCAGEM.curto_prazo.titulo}</h2>
                    <div class="space-y-6">${TECNICAS_ALAVANCAGEM.curto_prazo.tecnicas.map((t,i) => `<div class="border-2 border-cm-laranja rounded-xl p-6 bg-gradient-to-r from-white to-cm-bege">
                        <h3 class="text-2xl font-black text-cm-verde-escuro mb-4">ğŸ’¡ ${t.nome}</h3>
                        <div class="space-y-3 text-sm">
                            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg"><strong>ğŸ“– O que Ã©:</strong> ${t.descricao}</div>
                            <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-lg"><strong>ğŸ¯ Como fazer:</strong> ${t.acao}</div>
                            <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-lg"><strong>ğŸ“ˆ Impacto:</strong> ${t.impacto}</div>
                        </div>
                    </div>`).join('')}</div>
                </div>
                <div class="bg-cm-azul-claro rounded-2xl shadow-xl p-8 border-t-4 border-cm-verde-escuro">
                    <h2 class="text-3xl font-black text-cm-verde-escuro mb-6">${TECNICAS_ALAVANCAGEM.medio_prazo.titulo}</h2>
                    <div class="space-y-6">${TECNICAS_ALAVANCAGEM.medio_prazo.tecnicas.map(t => `<div class="border-2 border-cm-verde-escuro rounded-xl p-6 bg-gradient-to-r from-white to-green-50">
                        <h3 class="text-2xl font-black text-cm-verde-escuro mb-4">ğŸ’ ${t.nome}</h3>
                        <div class="space-y-3 text-sm">
                            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg"><strong>ğŸ“–:</strong> ${t.descricao}</div>
                            <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-lg"><strong>ğŸ¯:</strong> ${t.acao}</div>
                            <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-lg"><strong>ğŸ“ˆ:</strong> ${t.impacto}</div>
                        </div>
                    </div>`).join('')}</div>
                </div>
            </div>
        </div>`;
    }

    renderRelatorios() {
        const resumo = this.calcularResumo('mes');
        const porCategoria = this.calcularPorCategoria();
        return `<div class="min-h-screen bg-gradient-to-br from-gray-50 to-cm-bege">
            <div class="bg-gradient-to-r from-cm-verde-escuro to-cm-verde-claro text-white shadow-xl">
                <div class="max-w-7xl mx-auto px-4 py-6"><div class="flex items-center gap-4"><div class="bg-cm-laranja text-cm-verde-escuro font-black text-2xl px-4 py-2 rounded-lg shadow-lg">C&M</div><div><h1 class="text-3xl font-bold">ğŸ“ˆ RelatÃ³rios e AnÃ¡lises</h1><p class="text-sm mt-1 opacity-90">Insights Inteligentes</p></div></div></div>
            </div>
            ${this.renderMenu('relatorios')}
            <div class="max-w-7xl mx-auto px-4 py-8">
                <div class="bg-cm-azul-claro rounded-2xl shadow-xl p-8 mb-8 border-t-4 border-cm-laranja">
                    <h2 class="text-3xl font-black text-cm-verde-escuro mb-6">ğŸ“Š Resumo Geral</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div><h3 class="text-xl font-bold mb-4">ğŸ’° Fluxo de Caixa</h3><div class="space-y-3">
                            <div class="flex justify-between p-4 bg-green-50 rounded-xl border-2 border-green-500"><span class="font-bold">ğŸ’° Receitas</span><span class="font-black text-green-600">R$ ${resumo.receitas.toLocaleString('pt-BR')}</span></div>
                            <div class="flex justify-between p-4 bg-red-50 rounded-xl border-2 border-red-500"><span class="font-bold">ğŸ’¸ Despesas</span><span class="font-black text-red-600">R$ ${resumo.despesas.toLocaleString('pt-BR')}</span></div>
                            <div class="flex justify-between p-4 bg-blue-50 rounded-xl border-2 border-blue-500"><span class="font-bold">ğŸ“ˆ Investimentos</span><span class="font-black text-blue-600">R$ ${resumo.investimentos.toLocaleString('pt-BR')}</span></div>
                            <div class="flex justify-between p-5 bg-gradient-to-r from-cm-laranja to-cm-laranja-escuro rounded-xl"><span class="font-black text-white">ğŸ’¼ SALDO</span><span class="font-black text-white text-2xl">R$ ${resumo.saldo.toLocaleString('pt-BR')}</span></div>
                        </div></div>
                        <div><h3 class="text-xl font-bold mb-4">ğŸ“Š Top Categorias</h3><div class="space-y-2">${porCategoria.length > 0 ? porCategoria.map(([cat, dados], i) => `<div class="flex justify-between p-3 bg-cm-bege rounded-lg border-l-4 border-cm-laranja"><div class="flex items-center gap-3"><span class="bg-cm-laranja text-white font-black px-3 py-1 rounded-lg">${i+1}</span><span class="font-bold">${cat}</span></div><span class="font-black text-cm-laranja">R$ ${dados.total.toLocaleString('pt-BR')}</span></div>`).join('') : '<p class="text-center text-gray-500 py-8">Nenhuma transaÃ§Ã£o</p>'}</div></div>
                    </div>
                </div>
                <div class="bg-cm-azul-claro rounded-2xl shadow-xl p-8 mb-8 border-t-4 border-cm-verde-escuro">
                    <h2 class="text-3xl font-black text-cm-verde-escuro mb-6">ğŸ“¥ Exportar Dados</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <button onclick="app.exportarCSV()" class="bg-gradient-to-br from-green-500 to-green-600 text-white p-8 rounded-2xl font-black text-xl shadow-xl transform hover:scale-105 transition-all border-4 border-white"><div class="text-6xl mb-3">ğŸ“Š</div><div>Exportar Planilha</div></button>
                        <button onclick="app.exportarJSON()" class="bg-gradient-to-br from-cm-laranja to-cm-laranja-escuro text-white p-8 rounded-2xl font-black text-xl shadow-xl transform hover:scale-105 transition-all border-4 border-white"><div class="text-6xl mb-3">ğŸ’¾</div><div>Backup Completo</div></button>
                    </div>
                </div>
                <div class="bg-red-50 border-4 border-red-500 rounded-2xl p-8"><h2 class="text-3xl font-black text-red-800 mb-4">âš ï¸ Zona de Perigo</h2><p class="text-gray-700 mb-6 font-semibold">Cuidado! Esta aÃ§Ã£o nÃ£o pode ser desfeita.</p><button onclick="app.limparDados()" class="bg-red-500 text-white px-8 py-4 rounded-xl font-black">ğŸ—‘ï¸ Apagar Todos os Dados</button></div>
            </div>
        </div>`;
    }
}

const app = new GestaoFinanceira();
    </script>
</body>
</html>
